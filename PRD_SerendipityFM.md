# Serendipity FM - 产品需求文档 (PRD)

> 版本：1.0 | 日期：2026-02-03

---

## 1. 产品概述

### 1.1 产品名称
**Serendipity FM** （惊喜电台 / 随缘FM）

### 1.2 产品定位
一个极简优雅的"随机播客"网页应用，灵感来源于经典 iPod Shuffle 的理念——用户无法选择播放内容，一切都是随机的、充满惊喜的。

### 1.3 核心理念
- 🎲 **随机即惊喜**：用户只能"切歌"，无法自主选择内容
- 📖 **原汁原味**：保留原始文章内容，不转写、不改成对话形式
- 🎧 **听觉体验**：将优质文字内容转化为高质量语音播客
- ✨ **极简设计**：参考豆瓣FM的简洁优雅风格

---

## 2. 用户场景

| 场景 | 描述 |
|------|------|
| 通勤路上 | 用手机在上下班路上收听，解放双眼 |
| 工作间隙 | 用电脑在午休或工作间隙收听放松 |
| 分享好友 | 将网站链接分享给朋友一起体验 |

---

## 3. 功能需求

### 3.1 核心功能 (MVP - 最小可行产品)

#### 3.1.1 播放器
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 随机播放 | 页面加载时随机选择一篇文章开始播放 | P0 |
| 暂停/播放 | 右上角小按钮控制播放状态 | P0 |
| 下一篇 | 跳过当前，随机切换到另一篇 | P0 |
| 红心收藏 | 标记喜欢的内容（存储在浏览器本地） | P1 |
| 删除/不喜欢 | 从播放池中移除（本次会话内有效） | P1 |

#### 3.1.2 内容展示
| 元素 | 来源 | 说明 |
|------|------|------|
| 封面配图 | HTML正文中的图片（非顶部banner） | 跳过公众号引导图，选取正文内容图片；如无则用 Unsplash 随机图 |
| 文章标题 | `<title>` 或 `<meta property="og:title">` | 如：crush了一个女生不洗头的瞬间 |
| 作者信息 | 正文中提取（如"K"） | 优先从正文解析，备选 `<meta name="author">` |
| 时长 | 根据音频文件计算 | 格式：-MM:SS |

#### 3.1.3 封面图处理规则
| 规则 | 说明 |
|------|------|
| **跳过引导图** | 忽略顶部的公众号关注引导图片（如"风里雨里每天等你"） |
| **选取正文图** | 优先选择正文第一张有意义的配图 |
| **固定尺寸展示** | 播放器封面为固定正方形（如 200x200px） |
| **图片适配** | 使用 `object-fit: cover` + `object-position: center` 居中裁切 |
| **兜底方案** | 无合适图片时使用 Unsplash 随机图片 |

#### 3.1.4 约束条件
- ❌ 用户**不能**浏览文章列表
- ❌ 用户**不能**搜索或筛选
- ❌ 用户**不能**选择特定文章
- ✅ 用户**只能**接受随机的惊喜

### 3.2 延后功能 (Future)

| 功能 | 描述 | 阶段 |
|------|------|------|
| 自动抓取 | 自动抓取新文章并生成音频 | V2 |
| 用户账户 | 登录后跨设备同步收藏 | V2 |
| PWA支持 | 离线播放、添加到主屏幕 | V2 |
| 播放历史 | 查看已听过的内容 | V2 |

---

## 4. 语音生成方案

### 4.1 技术选型：Podcastfy

经评估，[Podcastfy](https://github.com/souzatharsis/podcastfy) 是一个可行的开源方案：

| 特性 | 说明 |
|------|------|
| ✅ 多种TTS引擎 | 支持 OpenAI、ElevenLabs、Google、Edge TTS |
| ✅ 免费选项 | Edge TTS 完全免费，无需API Key |
| ✅ 多语言支持 | 支持中文语音合成 |
| ✅ 自定义配置 | 可配置语音风格、语速等 |
| ⚠️ 默认双人对话 | 需要自定义配置为单人朗读模式 |

### 4.2 TTS引擎推荐

| 引擎 | 成本 | 质量 | 中文支持 | 推荐场景 |
|------|------|------|----------|----------|
| **Edge TTS** | 🆓 免费 | ⭐⭐⭐ | ✅ 好 | MVP首选 |
| OpenAI TTS | 💰 付费 | ⭐⭐⭐⭐ | ✅ 好 | 追求高质量 |
| ElevenLabs | 💰💰 较贵 | ⭐⭐⭐⭐⭐ | ⚠️ 需配置 | 最佳质量 |

### 4.3 "不同声音"实现策略

为实现"不同文章使用不同语音角色 + 根据情感/主题匹配风格"：

#### 方案A：预设语音角色池（推荐MVP）
```
声音池 = [
  "zh-CN-XiaoxiaoNeural",  # 年轻女声，适合生活类
  "zh-CN-YunxiNeural",     # 年轻男声，适合叙事类
  "zh-CN-XiaoyiNeural",    # 温柔女声，适合情感类
  "zh-CN-YunjianNeural",   # 成熟男声，适合深度内容
]
```
- 随机分配给不同文章
- 简单有效，无需额外AI分析

#### 方案B：智能匹配（Future）
- 使用LLM分析文章情感/主题
- 自动匹配最合适的语音角色
- 需要额外的API调用成本

### 4.4 语音生成时机

**建议：预先生成**

| 策略 | 优点 | 缺点 |
|------|------|------|
| ✅ 预先生成 | 用户体验流畅、无等待 | 需要存储空间 |
| ❌ 实时生成 | 节省存储 | 用户需等待、体验差 |

工作流程：
```
本地HTML文件 → 解析提取正文 → Podcastfy生成音频 → 存储MP3 → 网页播放
```

---

## 5. 技术架构

### 5.1 推荐技术栈（适合小白）

考虑到您是技术小白，推荐最简单的方案：

| 层级 | 技术选择 | 原因 |
|------|----------|------|
| **前端** | 纯 HTML + CSS + JavaScript | 无需学习框架 |
| **存储** | 浏览器 localStorage | 无需数据库 |
| **音频** | 预生成的 MP3 文件 | 放在本地或CDN |
| **部署** | Vercel / Netlify / GitHub Pages | 免费、一键部署 |
| **语音生成** | Python + Podcastfy（本地运行） | 一次性生成 |

### 5.2 项目结构

```
SerendipityFM/
├── index.html              # 主页面
├── style.css               # 样式
├── app.js                  # 交互逻辑
├── data/
│   └── episodes.json       # 文章元数据
├── audio/
│   ├── episode_001.mp3     # 生成的音频
│   ├── episode_002.mp3
│   └── ...
├── covers/
│   ├── episode_001.jpg     # 封面图
│   └── ...
├── scripts/
│   └── generate_audio.py   # 音频生成脚本
└── source/
    └── *.html              # 原始HTML文件
```

### 5.3 数据结构

`episodes.json` 示例：
```json
{
  "episodes": [
    {
      "id": "001",
      "title": "15件做了就能立刻充满电的小事",
      "author": "豆瓣用户",
      "description": "一些立刻获得能量的小tips",
      "duration": 360,
      "audioUrl": "audio/episode_001.mp3",
      "coverUrl": "covers/episode_001.jpg",
      "voice": "zh-CN-XiaoxiaoNeural",
      "sourceFile": "15件做了就能立刻充满电的小事.html"
    }
  ]
}
```

---

## 6. 界面设计

### 6.1 设计参考

参考豆瓣FM的极简风格：
- 大量留白
- 淡雅配色（浅灰/米白背景）
- 圆形封面图
- 简洁的图标按钮

### 6.2 布局草图

```
┌─────────────────────────────────────────────────────────────┐
│                                                     [⏸️]     │
│                                                              │
│                                                              │
│     ┌──────────┐                                            │
│     │          │    Serendipity FM                          │
│     │  ┌────┐  │                                            │
│     │  │    │  │    15件做了就能立刻充满电的小事              │
│     │  │封面│  │    豆瓣用户                                 │
│     │  │    │  │                                            │
│     │  └────┘  │    ─────────────────○───  -02:30            │
│     │          │                                            │
│     └──────────┘    ❤️    🗑️    ⏭️                          │
│                                                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### 6.3 配色方案

| 元素 | 颜色 |
|------|------|
| 背景 | `#F5F5F5` 浅灰 |
| 主色调 | `#42B983` 薄荷绿（参考豆瓣FM） |
| 文字 | `#333333` 深灰 |
| 次要文字 | `#999999` 浅灰 |
| 红心 | `#E74C3C` 红色 |

---

## 7. 实施计划

### Phase 1：MVP（本地版本）
预计工时：1-2天

- [x] 需求文档完成
- [ ] 解析HTML文件，提取标题、作者、正文、图片
- [ ] 使用 Podcastfy + Edge TTS 生成音频
- [ ] 开发前端播放器页面
- [ ] 实现随机播放、暂停、切换功能
- [ ] 实现红心收藏（localStorage）
- [ ] 本地测试运行

### Phase 2：部署上线
预计工时：0.5天

- [ ] 部署到 Vercel/Netlify
- [ ] 获得公开访问链接
- [ ] 分享给朋友测试

### Phase 3：优化迭代
根据反馈持续改进

---

## 8. 需求确认 ✅

| 问题 | 确认结果 |
|------|----------|
| TTS引擎 | ✅ Edge TTS（免费） |
| 默认封面 | ✅ Unsplash 随机图片 |
| 语音语言 | ✅ 中文 |
| 语音角色 | ✅ 随机混搭男女声 |
| 进度条样式 | ✅ 仅显示剩余时间（参考豆瓣FM） |
| 网站名称 | ✅ Serendipity FM |
| 部署方式 | ✅ GitHub + Vercel/Netlify |

---

## 9. 附录

### 9.1 HTML文件结构分析

已分析您的微信公众号保存的HTML文件：

| 字段 | 提取位置 |
|------|----------|
| 标题 | `<meta property="og:title">` |
| 作者 | `<meta name="author">` |
| 描述 | `<meta name="description">` |
| 封面图 | `<meta property="og:image">` |
| 正文 | `<div id="js_content">` 内的文本 |

### 9.2 现有文章列表

1. 15件做了就能立刻充满电的小事
2. crush了一个女生不洗头的瞬间
3. 从此以后，朋友管我的相亲对象叫"满月哥"
4. 你感受过来自陌生女性的善意吗_
5. 分享我在高压工作下，保持良好心态和健康生活的经验
6. 只坚持做这一件事，身体就好了很多
7. 妈妈在年会上的获奖感言，我逐字学习
8. 我发现了和所有人相处都落落大方的秘诀
9. 我最近运气好到爆！我周围的人全都吸到了好运！！
10. 让上班的日子好过一点的小方法

---

**下一步**：请确认上述开放问题，我将开始编写代码实现！
